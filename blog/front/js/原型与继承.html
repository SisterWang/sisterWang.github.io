<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>原型与继承 | 金鹏的博客</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="这里将会记录我个人的生活和学习动态">
    
    <link rel="preload" href="/assets/css/0.styles.3c72cb3e.css" as="style"><link rel="preload" href="/assets/js/app.2ebee642.js" as="script"><link rel="preload" href="/assets/js/2.d71c49fd.js" as="script"><link rel="preload" href="/assets/js/9.92b4b682.js" as="script"><link rel="prefetch" href="/assets/js/10.0b846a94.js"><link rel="prefetch" href="/assets/js/11.8328ebc4.js"><link rel="prefetch" href="/assets/js/12.2f0b0821.js"><link rel="prefetch" href="/assets/js/3.bb659546.js"><link rel="prefetch" href="/assets/js/4.77a548c8.js"><link rel="prefetch" href="/assets/js/5.2c2a236f.js"><link rel="prefetch" href="/assets/js/6.504f3820.js"><link rel="prefetch" href="/assets/js/7.bbaabdfe.js"><link rel="prefetch" href="/assets/js/8.acb8f7ba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3c72cb3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">金鹏的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/SisterWang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/SisterWang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/blog/front/" class="sidebar-heading clickable router-link-active open"><span>前端</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/front/js" class="sidebar-heading clickable router-link-active open"><span>JS相关</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/front/js/原型与继承.html" class="active sidebar-link">原型与继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#prototype" class="sidebar-link">[[Prototype]]</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#设置-prototype" class="sidebar-link">设置[[Prototype]]</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#使用构造函数创建继承原型的对象" class="sidebar-link">使用构造函数创建继承原型的对象</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#默认的prototype" class="sidebar-link">默认的prototype</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#原生的原型" class="sidebar-link">原生的原型</a></li><li class="sidebar-sub-header"><a href="/blog/front/js/原型与继承.html#技术总结" class="sidebar-link">技术总结</a></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/life/" class="sidebar-heading clickable"><span>生活</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="原型与继承"><a href="#原型与继承" class="header-anchor">#</a> 原型与继承</h1> <p><code>原型与继承</code>是JS的重要特性之一：</p> <p>当我们希望在一个常用对象的基础上添加一些功能时，直接复制粘贴并在此基础上添加代码可以很快搞定；但后续维护这段代码时则容易让人产生迷惑：同样的代码出现了两次，这显然不够优雅☹️</p> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <p>在面向对象的编程思想中，扩展功能一般使用<code>继承</code>来实现。例如，我们拥有一个<code>角色</code>对象，<code>角色</code>拥有“生命值”、“攻击力”等<strong>属性</strong>，同时可以使用“攻击”，“防御”等<strong>方法</strong>。这时，我们希望能创建一个<code>主角</code>对象，<code>主人公</code>在拥有<code>角色</code>的属性和方法的同时，希望新增“主人公光环”方法。那么<code>主人公</code>只要声明“主人公光环”即可，其余属性和方法将直接从<code>角色</code><strong>继承</strong>。</p> <p><img src="/js/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1.png" alt="主人公继承角色"></p> <h2 id="prototype"><a href="#prototype" class="header-anchor">#</a> [[Prototype]]</h2> <p>在JS中，同样可以用这种方法扩展对象，只要使用对象隐藏的<code>[[Prototype]]</code>属性即可。<code>[[Prototype]]</code>属性保存一个对象的引用（或为null），该对象被称为<code>原型</code>。<strong>根据上面的例子，可以说<code>角色</code>是<code>主人公</code>的<code>原型</code>。</strong></p> <p><img src="/js/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/2.png" alt="角色是主人公的原型"></p> <p>对象可以使用<code>[[Prototype]]</code>的属性和方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明角色对象</span>
<span class="token keyword">const</span> jueSe <span class="token operator">=</span> <span class="token punctuation">{</span>
  atk<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'攻击！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 声明主人公对象</span>
<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">halo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'使用主人公光环！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>zhuRenGong<span class="token punctuation">,</span> jueSe<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置jueSe为zhuRenGong的原型</span>

zhuRenGong<span class="token punctuation">.</span><span class="token function">halo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用主人公光环！</span>
<span class="token comment">// 主人公继承了角色!</span>
zhuRenGong<span class="token punctuation">.</span><span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 攻击！</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="设置-prototype"><a href="#设置-prototype" class="header-anchor">#</a> 设置[[Prototype]]</h2> <p>我们已经知道<code>[[Prototype]]</code>的指向为对象的原型，但在JS中，<code>[[Prototype]]</code>是一个被隐藏的属性，不能直接对其设置。</p> <p>在过去，绝大多数浏览器实现了<code>__proto__</code>来设置<code>[[Prototype]]</code>。这个方式直到现在依然可以使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>zhuRenGong<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> jueSe<span class="token punctuation">;</span> <span class="token comment">// 此时zhuRenGong的原型被设置为jueSe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>__proto__</code>本质上是<code>[[Prototype]]</code>的getter/setter，<strong>意味着<code>__proto__</code>并不等于<code>[[Prototype]]</code></strong>。这样的方式是有风险的⚠️：<code>__proto__</code>的类型只能设置为<code>Object</code>或<code>null</code>！当用户可以自定义名为<code>__proto__</code>的键时（这个键的值可能为任何类型），将会导致错误。</p> <p>因此，JS实现了专用于设置<code>[[Prototype]]</code>的方法,我们应该使用这些方法替换<code>__proto__</code>：</p> <ul><li>Object.create(proto, [descriptors]) ——创建一个以<code>proto</code>为原型<code>[[Prototype]]</code>的对象</li> <li>Object.setPrototypeOf(obj, proto) ——将<code>obj</code>的原型<code>[[Prototype]]</code>设置为<code>proto</code></li> <li>Object.getPrototypeOf(obj) ——返回<code>obj</code>的原型<code>[[Prototype]]</code></li></ul> <h3 id="object-create-proto-descriptors"><a href="#object-create-proto-descriptors" class="header-anchor">#</a> Object.create(proto, [descriptors])</h3> <p>用于创建对象并指定原型，并可以通过descriptors来额外指定属性和方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明角色对象</span>
<span class="token keyword">const</span> jueSe <span class="token operator">=</span> <span class="token punctuation">{</span>
  atk<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'攻击！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建继承了“角色”的“主人公”</span>
<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>jueSe<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可以指定一些额外的属性或方法</span>
  name<span class="token operator">:</span> <span class="token string">'cjp'</span><span class="token punctuation">,</span>
  atk<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function">halo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'使用主人公光环！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="object-setprototypeof-obj-proto"><a href="#object-setprototypeof-obj-proto" class="header-anchor">#</a> Object.setPrototypeOf(obj, proto)</h3> <p>用于指定对象的原型：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明角色对象</span>
<span class="token keyword">const</span> jueSe <span class="token operator">=</span> <span class="token punctuation">{</span>
  atk<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'攻击！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 主人公对象</span>
<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'cjp'</span><span class="token punctuation">,</span>
  atk<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function">halo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'使用主人公光环！'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 让“主人公”继承“角色”</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>zhuRenGong<span class="token punctuation">,</span> jueSe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="object-getprototypeof-obj"><a href="#object-getprototypeof-obj" class="header-anchor">#</a> Object.getPrototypeOf(obj)</h3> <p>获取对象的原型：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明角色对象</span>
<span class="token keyword">const</span> jueSe <span class="token operator">=</span> <span class="token punctuation">{</span>
  atk<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'攻击！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 创建继承了“角色”的“主人公”</span>
<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>jueSe<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可以指定一些额外的属性或方法</span>
  name<span class="token operator">:</span> <span class="token string">'cjp'</span><span class="token punctuation">,</span>
  atk<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function">halo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'使用主人公光环！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>zhuRenGong<span class="token punctuation">)</span> <span class="token operator">===</span> jueSe<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>🎉🎉🎉现在，我们知道如何用现代的方式设置<code>原型</code>了🎉🎉🎉</p> <h2 id="使用构造函数创建继承原型的对象"><a href="#使用构造函数创建继承原型的对象" class="header-anchor">#</a> 使用构造函数创建继承原型的对象</h2> <p>如果我们希望能为“主人公”取一个名字，我们可能会借助构造函数来创建“主人公”，同时让主人公继承“角色”。那么，构造函数是如何让其构造的对象正确的继承原型呢？</p> <h3 id="prototype-2"><a href="#prototype-2" class="header-anchor">#</a> prototype</h3> <p>JS中每个函数都拥有<code>prototype</code>属性，当用<code>new F</code>的形式创建对象时，对象的原型会被设置为<code>F</code>的<code>prototype</code>：</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>prototype</code>与<code>[[Prototype]]</code>原型并不是一个概念，<code>prototype</code>是一个常规属性......这可能JS的原型概念很难理解记忆的罪魁祸首🙃</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明角色对象</span>
<span class="token keyword">const</span> jueSe <span class="token operator">=</span> <span class="token punctuation">{</span>
  atk<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function">attack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'攻击！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 构造函数，prototype指向jueSe对象</span>
<span class="token keyword">function</span> <span class="token function">ZhuRenGong</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 为主人公取名字</span>
<span class="token punctuation">}</span>
<span class="token class-name">ZhuRenGong</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> jueSe<span class="token punctuation">;</span>
<span class="token comment">// 创建新对象</span>
<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZhuRenGong</span><span class="token punctuation">(</span><span class="token string">'cjp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 该对象继承了jueSe</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>zhuRenGong<span class="token punctuation">)</span> <span class="token operator">===</span> jueSe<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="默认的prototype"><a href="#默认的prototype" class="header-anchor">#</a> 默认的prototype</h2> <p>每个函数都有默认的<code>prototype</code>属性，哪怕你并没有指定。<strong>默认的<code>prototype</code>指向一个只有<code>constructor</code>属性的对象，且<code>constructor</code>属性指向函数自身</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ZhuRenGong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 声明一个函数</span>
<span class="token comment">// 这个函数默认的prototype：</span>
<span class="token comment">// ZhuRenGong.prototype = { constructor: ZhuRenGong }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">ZhuRenGong</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> ZhuRenGong<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>因为用<code>new F</code>的形式创建对象时，对象的原型会被设置为<code>F</code>的<code>prototype</code>。那么在默认的情况下，新对象的原型就是一个只有<code>constructor</code>属性的对象</p> <p><img src="/js/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/3.png" alt="原型为默认的prototype"></p> <p>看起来，新对象继承了默认的prototype，也就可以通过constructor访问他的构造函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ZhuRenGong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 声明一个函数</span>

<span class="token keyword">const</span> zhuRenGong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZhuRenGong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过constructor访问构造函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zhuRenGong<span class="token punctuation">.</span>constructor <span class="token operator">===</span> ZhuRenGong<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>⚠️但是⚠️，这种方式并不严谨，因为<code>constructor</code>的指向只在创建时被指向函数自身，后续其指向完全取决于代码逻辑</p></div> <h2 id="原生的原型"><a href="#原生的原型" class="header-anchor">#</a> 原生的原型</h2> <p>JS中预置了很多原生的原型，其中包含一些常用的方法。原生的原型有Array.prototype，Object.prototype等等...</p> <p><img src="/js/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/4.png" alt="原生的原型"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在需要的时候，可以“借用”原型中的方法：<code>myObj.join = Array.prototype.join</code></p></div> <h2 id="技术总结"><a href="#技术总结" class="header-anchor">#</a> 技术总结</h2> <ol><li>原型的概念可以模拟继承</li> <li>对象的<code>[[Prototype]]</code>隐藏属性等于其原型</li> <li>对象可以访问原型的属性和方法（当对象本身没有该属性或方法时）</li> <li>通过<code>Object.create</code>创建对象并指定原型</li> <li><code>Object.setPrototypeOf</code>设置对象的原型</li> <li><code>Object.getPrototypeOf</code>获取对象的原型</li> <li><code>new</code>创造的对象，其原型为构造函数的<code>prototype</code>属性指向的对象</li> <li>函数<code>F</code>默认的<code>prototype</code>指向<code>{ construcotr: F }</code></li></ol> <p>完结撒花🎉🎉🎉</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">1/25/2021, 5:55:59 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/life/">
        生活
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ebee642.js" defer></script><script src="/assets/js/2.d71c49fd.js" defer></script><script src="/assets/js/9.92b4b682.js" defer></script>
  </body>
</html>
